{% extends '::base.html.twig' %}

{% block title %}{{ test.name }} | {{ parent() }}{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/header.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ asset('css/test_content.css') }}">
    <script type="text/javascript" src="{{ asset('js/jquery-1.11.3.min.js') }}"></script>
{% endblock %}

{% block body%}
    <body>

    {% include 'header.html.twig' %}

    <div class="content marg-auto clearfix">
        <div id="lvl">
            <h3>{{ test.name }}</h3>
            <p>{{ test.description }}</p>
            {% if is_granted('ROLE_ADMIN') %}
                <span>
                    <a href={{ path('testEditForm', {'id':test.id}) }}>РЕДАКТРИРОВАТЬ</a>
                    | <a href={{ path('testDel', {'id':test.id}) }}>УДАЛИТЬ</a>
                    | <a href={{ path('addQuestionForm', {'id':test.id}) }}>ДОБАВИТЬ ВОПРОС</a>
                </span>
            {% endif %}
        </div>


    <p class="mar-l-35">Вопросы</p>

        <form id="questionForm" action={{ path('_welcome') }}test/id{{ test.id }}/complete method="post" name="questionForm">

        {% for question in test.questions %}
        <div class="quest-box quest-box-{{ loop.index }}">
            <div class="quest-number fl-left al-center vert-align-m"><p class="vert-align-m mar-pad-0 font-s-14">{{ loop.index }}</p></div>
            <ul class="question fl-right mar-pad-0">
                <h4 class="mar-pad-0">{{ question.content }}</h4>
                <p class="mar-pad-0">выберите один из вариантов:</p>
                <br>
                <div class="al-center">
                    {% for answer in question.answers %}
                    <li><label for="Q{{ answer.id }}">{% if not is_granted('ROLE_ADMIN') %}<input type="radio" id="Q{{ answer.id }}"
                                                             value="{{ answer.id }}" name="_answerArray[{{ answer.question.id }}]" required>{% endif %}<span>{{ answer.content }}</span></label></li>

                    {% endfor %}
                    <a href={{ path('_welcome') }}test/id{{ test.id }}/question{{ question.id }}/del>УДАЛИТЬ</a>
                </div>
            </ul>
        </div>
            {% endfor %}

    {% if not is_granted('ROLE_ADMIN') %}
        <button type="submit" class="fl-right al-center" id="end">Завершить</button>
    {% endif %}
        </form>

        {% if is_granted('ROLE_ADMIN') %}
        <div class="content marg-auto clearfix">
            {% for explanation in test.explanation %}
            <div id="lvl">
                <h3>Пояснение {{ loop.index }}</h3>
                <p>{{ explanation.description }}</p>
                <p>Минимальный Рейтинг:{{ explanation.MinRating }}</p>
                <p>Максимальный рейтинг:{{ explanation.MaxRating }}</p>
            </div>
            {% endfor %}
        {% endif %}
        {#<script type="text/javascript">#}

            {#$(document).ready(function () {#}

                {#$('input[type="radio"]').click(function (event) {#}
                    {#$(.quest-box)#}
                {#});#}
            {#});#}

        {#</script>#}

        {% if answers is defined %}
            {% for answer in answers %}
                {{ answer }}
            {% endfor %}
        {% endif %}


    </div>

    </body>
{% endblock %}